<!--
	THIS EXAMPLE WAS DOWNLOADED FROM https://echarts.apache.org/examples/en/editor.html?c=map-usa&code=DYUwLgBAJghmMG4BQSBm4DGALAFAcizDAAcBnALgHpKoAnASwDcQA6AcwHsO3QWMOAtpQCuGAPz0oAXgCMAFQDCACQCqABQ4AWDAEkAcqXoBFUsK062AVgUB2egA4bAKwBqMnQJBs8ASiQQIFjAsEAA7HFoQUmIOUNIQCCkAPggAb38AiHpUCBwAQkjo2PiWDgBrHzSMzIhg2g4AdwhQkCaAUVp62nwO-ogYDggAI2FSDBhaCEGAKQBlAHk9X2QagF9qiEiwYVpQzaiYuNYnUlicHwQIagh-UOZaMATiCZgpoadwGdmM1b8AoJC4ROsUSKXSNVg8ESEGBoRWmVup14wG4-AAIjAoBxSDcJpE2JjseQ8AAaaBwGAXH5_QLjMDYHAgTocSbJKo1REcXhMro9Zn9QbjTpeCYQOaLYlknksqkBX7IFACACeCiwEzALFIWEaABkOJj6KE2OdkAASdjgHAAJXm8zkAH01ABBORKCAAaggeBoFMoMFI8TAlDYIA4lAaLOAUBYsNJEFQwlCGDA9BBOFGMGmp1ClXBEGVqvVLCwkhAeoNRpNGRA2HVpBY-PopEetAAsjBiPgVLMnXGM1nYmS8wEncB_WUYOR2TUIKBUGApwBaGQAZhkJI2ATAHGIU4ATJYNzOIA1JMEpzJLBtVkfMkoYA0YPR6FPh5k5wuIMuZAAGW81bddwgPd7H_TJTygc8ICvNYwLwNRhCZbcICteh-DwV9N1nEB5yXGwADYwK3Hd90IrCIKgvdr2peEdxTEEpGnLd6DAUBMOPR4AA9PzwbsnQgDRiGEMd6L2Npm3oAQ4CiXI9x_GQ9x8UksNMIYuJ4jEoVQeoBBPBoGj4MJTHrThGGU49VOAQ0yinAgiF3ah9IMjAjNGdgOEYSgYmIKIg0hGAfXgQN60IARgHMmcP1shg2EIPBrzA7cuRTIC3y3GKQ1oWyWJAAQIpqLVGjREAxyVKc_ywsBaBgOIWNTUI0R2OB6vKlgqNgjZGCbYQYGAdtUqwqKvRiuKiPzQ0p0sH9pumsapM4qcV3sGaZrGw0rRqkN2OPG4uRZKcAG0sJqPAAGI1xXfCAE5LHynazs0SwbEsIZNDu48zpsTRMSgGR3pnM6YCGKArpAK7_pO06QB_VAV1QewIcyM7UBR1AhlQRGAmRkBoaun9Ma9U7UFgEB8L-sbIdQTR8KgTQVwJs6oBsFcfz3GwGdOmAptZ_D4p2iAAF0sJvSqQG4w68CUehYrjPA9QaPABbG8ZgAwYSgbY2paEQhKNiS4Ahg4BamMyQqGinKrELG6gWXoMIePuFMVf-oa8A_f7ANswD_vQOAdhAbbj38lw7fNtJ9kxeZQmAMr416-IIBF_nCm3SJXyTnbSBgZgnVIDwYC2tJ1mPYvMgzgJ4gYKJDqwtLMlCGBPFsviBJ3cSUykx5SERsAlR82ypOIRH6kbi3tZACn8w7Zue0R3LiDVQwKBN48xyGErA_5iAzbHnWt8T47E8n_ya_31JmkbgOvVHIHG5gONGF6xCp00ew9zkvcVyPw-AnPhum-vmOUgE4H5PyvszGQmhNBXW_mfC-AC8BOgYAAL1iPfMkj9gDPwgPhSwlgVwHksLAref9L62SQROOI_pQFYKvnuK60DVwyGIfzUhCCFC9WyCyUI9B0EQEwdgpaP5NCQJZiwnabCr54AUHtaqWIaHYMsDIRwlg37iOPJI2yMjQgtGTGhYQYAFFXxXJYPGK5NA2HUTOTRXpipjkfJEIxU4royBsD-K6e4rE1BsXgNETYqpoUgBwHIMisECCGLwpxOCCExK8ZkHxAAxFEDBYBRJkFdNcz18L2Dib_eBUiADioZaBsEiRgsBziXFXQYUQ8uEj8m2XvI-Z8aSVweIurk8O_8pE6FgNqNJpinogU6T4nQwArKhA4E2NJIFnqEJGQ0r0OhQhQF4Q3KJuCVzM3MQs7ptkdCND4QI4xP4vrKPwrsshXoADSNUs7d3KbQ_c9h7CmJ_LUyeeS9k3PtqIMoSool02WiIj5P8ulXLlhwYQTY1lHIqRAam8l7AZMuQg9shoQCtPoekzxdSNGLLwO2WgSoxwrKiao-wj18JfzxdYgl7YAwwGwKMcAYAHn8PhfhfC1NIGaFRVI1saESwElCFEq6LyVyXR_Py2ygqdFRA4PAclWyXFtJlV6QVAYmyGGIMQegUT6GUo8Rc2l3j6XaqhQwDZrN0kvPVYS2I8B1mPOwb-d5kDmGmviQSvQIAhjVWAXCp5EBlF4MsAee1vrH6pJdXQ56yK1yRtaBAe8AgyAlkcbGi8BDTnKKTU0aYTJ4gAqzRAF53K3n5ogK2MWaEOAGp_K8_BOSvVfIhb6poABNFkZQ0k3TcXuMmkaWTBAgBw-oEyg3YKunM05NLPngoQXoEdWAIAYjKIqqdV9rpXXwsM1ti6pHzBLPW0tMhLxQPfqCuB3y8DzDKGObUUkolLUgW_aVB6fHzHxLEF9yKMn4PtWoMIcQSWPx4Vui8bNqX4JNQunxVptRQASDoUgpKoBpPeazDx9rZhQtHeOrkhpIMIpsJ_Mj86wU-LwwY1d67N1RPsJKkxfLP0ErkCBqI8RMWlorXuum9qOOcWoaWwd7yPE_kozeiFKh4BYANU22Z9qXBMgEI6jZYnz3KfoCUw0ZSOXBvsKG-w-FLFsdvQAdX9CWI025RW8eRW4hS9qLO-QgCHXTEG0lNpEVJkhBKLNNkRIaclZHqXipc0qQQhpvClqety5z5mIUISQoMVC6FS2XVM421jh8hYlw2PlxO8ICxqgeJqcA8xiCiRwHReqVJ5RAA
	⚠ Please be aware that this chart is not an official demo of Apache ECharts but is made by user-generated code.
-->
<!DOCTYPE html>
<html lang="en" style="height: 100%">

<head>
  <meta charset="utf-8">
</head>

<body style="height: 100%; margin: 0">
  <div id="container" style="height: 60%"></div>
  <div id="lineChart" style="height: 35%;"></div>

  <script type="text/javascript"
    src="https://echarts.apache.org/en/js/vendors/jquery@3.7.1/dist/jquery.min.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://echarts.apache.org/en/js/vendors/echarts-gl/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://echarts.apache.org/en/js/vendors/echarts-stat/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-graph-modularity extension
  <script type="text/javascript" src="https://echarts.apache.org/en/js/vendors/echarts-graph-modularity/dist/echarts-graph-modularity.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/extension/bmap.min.js"></script>
  -->

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};
    var option;

    let data = $.getJSON('./assets/BR-exportacoes_importacoes_2025.json', function (data) {
      return data;
    });

    console.log(data);
    myChart.showLoading();
    $.getJSON('./assets/world.json', function (usaJson) {
      myChart.hideLoading();
      echarts.registerMap('WORLD', usaJson);
      option = {
        title: {
          text: 'Volume de Exportações do Brasil (Ano 2025)',
          subtext: 'Dados do Monitor de Comercio Exterior Brasileiro',
          left: 'center'
        },
        tooltip: {
          trigger: 'item',
          showDelay: 0,
          transitionDuration: 0.2
        },
        visualMap: {
          left: 'right',
          min: 500000,
          max: 38000000,
          inRange: {
            color: [
              '#313695',
              '#4575b4',
              '#74add1',
              '#abd9e9',
              '#e0f3f8',
              '#ffffbf',
              '#fee090',
              '#fdae61',
              '#f46d43',
              '#d73027',
              '#a50026'
            ]
          },
          text: ['High', 'Low'],
          calculable: true
        },
        toolbox: {
          show: true,
          //orient: 'vertical',
          left: 'left',
          top: 'top',
          feature: {
            dataView: { readOnly: false },
            restore: {},
            saveAsImage: {}
          }
        },
        series: [
          {
            name: 'USA PopEstimates',
            type: 'map',
            roam: true,
            map: 'WORLD',
            emphasis: {
              label: {
                show: true
              }
            },
            data: [
              { name: 'Alabama', value: 4822023 },
              { name: 'Alaska', value: 731449 },
              { name: 'Arizona', value: 6553255 },
              { name: 'Arkansas', value: 2949131 },
              { name: 'California', value: 38041430 },
              { name: 'Colorado', value: 5187582 },
              { name: 'Connecticut', value: 3590347 },
              { name: 'Delaware', value: 917092 },
              { name: 'District of Columbia', value: 632323 },
              { name: 'Florida', value: 19317568 },
              { name: 'Georgia', value: 9919945 },
              { name: 'Hawaii', value: 1392313 },
              { name: 'Idaho', value: 1595728 },
              { name: 'Illinois', value: 12875255 },
              { name: 'Indiana', value: 6537334 },
              { name: 'Iowa', value: 3074186 },
              { name: 'Kansas', value: 2885905 },
              { name: 'Kentucky', value: 4380415 },
              { name: 'Louisiana', value: 4601893 },
              { name: 'Maine', value: 1329192 },
              { name: 'Maryland', value: 5884563 },
              { name: 'Massachusetts', value: 6646144 },
              { name: 'Michigan', value: 9883360 },
              { name: 'Minnesota', value: 5379139 },
              { name: 'Mississippi', value: 2984926 },
              { name: 'Missouri', value: 6021988 },
              { name: 'Montana', value: 1005141 },
              { name: 'Nebraska', value: 1855525 },
              { name: 'Nevada', value: 2758931 },
              { name: 'New Hampshire', value: 1320718 },
              { name: 'New Jersey', value: 8864590 },
              { name: 'New Mexico', value: 2085538 },
              { name: 'New York', value: 19570261 },
              { name: 'North Carolina', value: 9752073 },
              { name: 'North Dakota', value: 699628 },
              { name: 'Ohio', value: 11544225 },
              { name: 'Oklahoma', value: 3814820 },
              { name: 'Oregon', value: 3899353 },
              { name: 'Pennsylvania', value: 12763536 },
              { name: 'Rhode Island', value: 1050292 },
              { name: 'South Carolina', value: 4723723 },
              { name: 'South Dakota', value: 833354 },
              { name: 'Tennessee', value: 6456243 },
              { name: 'Texas', value: 26059203 },
              { name: 'Utah', value: 2855287 },
              { name: 'Vermont', value: 626011 },
              { name: 'Virginia', value: 8185867 },
              { name: 'Washington', value: 6897012 },
              { name: 'West Virginia', value: 1855413 },
              { name: 'Wisconsin', value: 5726398 },
              { name: 'Wyoming', value: 576412 },
              { name: 'Puerto Rico', value: 3667084 }
            ]
          }
        ]
      };
      myChart.setOption(option);
    });

    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);


    // Gráfico de linhas
    $.getJSON('./assets/BR-exportacoes_importacoes_2025.json', function (data) {
      // Extrai os anos
      const anos = Object.keys(data.BAL);

      // Função para somar valores de todos os países por ano e converter para bilhões
      function getSoma(tipo) {
        return anos.map(ano => {
          const paises = data[tipo][ano];
          const soma = paises.reduce((acc, p) => acc + (p.us_value || 0), 0);
          return soma / 1e9;
        });
      }

      const balValores = getSoma('BAL');
      const impValores = getSoma('IMP');
      const expValores = getSoma('EXP');

      var lineDom = document.getElementById('lineChart');
      var lineChart = echarts.init(lineDom, null, {
        renderer: 'canvas',
        useDirtyRect: false
      });

      var lineOption = {
        title: { text: 'Totais por Ano', left: 'left' },
        tooltip: { trigger: 'axis' },
        legend: {
          data: ['Exportações', 'Importações', 'Balança Comercial'],
          top: 0,
        },
        xAxis: { type: 'category', data: anos },
        yAxis: {
          type: 'value',
          name: 'Bilhões de US$'
        },
        series: [
          {
            data: balValores,
            type: 'line',
            name: 'Balança Comercial',
            smooth: true
          },
          {
            data: impValores,
            type: 'line',
            name: 'Importações',
            smooth: true
          },
          {
            data: expValores,
            type: 'line',
            name: 'Exportações',
            smooth: true
          }
        ]
      };

      lineChart.setOption(lineOption);
      window.addEventListener('resize', lineChart.resize);
    });
  </script>
</body>

</html>